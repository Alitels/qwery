/*!
  * qwery.js - copyright @dedfat
  * original inspiration: http://simonwillison.net/2003/Mar/25/getElementsBySelector/
  * https://github.com/polvero/qwery
  * Follow our software http://twitter.com/dedfat
  * MIT License
  */

!function(a,b){function j(a){var c=a.split(" "),e,f,g,i,j,k,l,m,n,o,p,q,r=[b],s,t,u,v;for(i=0,l=c.length;i<l;i++){token=c[i].replace(/^\s+|\s+$/g,"");if(token.indexOf("#")>-1){e=token.split("#"),f=e[0];var w=b.getElementById(e[1]);if(f&&w.nodeName.toLowerCase()!=f)return[];r=[w];continue}if(token.indexOf(".")>-1){e=token.split("."),f=e[o=0],f=f||"*",n=[];for(g=0,m=r.length;g<m;g++){p=f=="*"?d(r[g]):r[g].getElementsByTagName(f);for(j=0,k=p.length;j<k;j++)n[o++]=p[j]}r=[],q=0;for(k=0,m=n.length;k<m;k++)n[k].className&&n[k].className.match(new RegExp("(?:^|\\s+)"+e[1]+"(?:\\s+|$)"))&&(r[q++]=n[k]);continue}var x=token.match(/^(\w*)\[(\w+)([=~\|\^\$\*]?)=?"?([^\]"]*)"?\]$/);if(x){f=x[1],s=x[2],t=x[3],u=x[4],f||(f="*"),n=[],o=0;for(g=0;g<r.length;g++){f=="*"?p=d(r[g]):p=r[g].getElementsByTagName(f);for(j=0;j<p.length;j++)n[o++]=p[j]}r=[],q=0,v=h[t]||h[""];for(k=0;k<n.length;k++)v(n[k],s,u)&&(r[q++]=n[k]);continue}f=token,n=[],o=0;for(g=0;g<r.length;g++){p=r[g].getElementsByTagName(f);for(j=0;j<p.length;j++)n[o++]=p[j]}r=n}return r}function i(a,b){if(!b||!a||b==a)return!1;if(b.contains&&a.nodeType)return b.contains(a);if(b.compareDocumentPosition&&a.nodeType)return!!(b.compareDocumentPosition(a)&16);return!1}function g(a,b){return a.getAttribute(b)||""}function f(a){return new e(a)}function e(a){this.obj=c(a)}function d(a){return a.all?a.all:a.getElementsByTagName("*")}function c(a){return Array.prototype.slice.call(a,0)}e.prototype={each:function(a){for(var b=0;b<this.obj.length;b++)a.call(this.obj[b],this.obj[b],b,this.obj);return this},map:function(a){var b=[];for(var c=0;c<this.obj.length;c++)b[c]=a.call(this.obj[c],this.obj[c],c,this.obj);return b}};var h={"=":function(a,b,c){return a.getAttribute(b)==c},"~":function(a,b,c){return g(a,b).match(new RegExp("\\b"+c+"\\b"))},"|":function(a,b,c){return g(a,b).match(new RegExp("^"+c+"-?"))},"^":function(a,b,c){return g(a,b).indexOf(c)===0},$:function(a,b,c){return g(a,b).lastIndexOf(c)==a.getAttribute(b).length-c.length},"*":function(a,b,c){return g(a,b).indexOf(c)>-1},"":function(a,b){return a.getAttribute(b)}},k=function(){function d(d,e){e=typeof e=="string"?document.querySelector(e):e;if(b=d.match(a))return c((e||document).getElementsByClassName(b[1]),0);return c((e||document).querySelectorAll(d),0)}var a=/^\.([\w\-]+)$/,b;if(document.querySelector&&document.querySelectorAll)return d;return function(a,b){b=typeof b=="string"?k(b)[0]:b||document;var c=[],d=f(a.split(",")).map(function(a){return j(a)});f(d).each(function(a){var d=a;b!==document&&(d=[],f(a).each(function(a){i(a,b)&&d.push(a)})),c=c.concat(d)});return c}}(),l=a.qwery;k.noConflict=function(){a.qwery=l;return this},a.qwery=k}(this,document)
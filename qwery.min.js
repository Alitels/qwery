/*!
  * qwery.js - copyright @dedfat
  * https://github.com/ded/qwery
  * Follow our software http://twitter.com/dedfat
  * MIT License
  */

!function(a,b){function t(a,b){if(!b||!a||b==a)return!1;if(b.contains&&a.nodeType)return b.contains(a);if(b.compareDocumentPosition&&a.nodeType)return!!(b.compareDocumentPosition(a)&16);return!1}function s(a){var b=[],c,d,e,f,g,h,i=[],k,l,q=!0,r=p(a);if(!r.length)return b;b=o(r.pop());if(!r.length)return b;for(f=b.length;f--;){l=b[f],h=l;for(e=r.length;e--;){q=!1;parents:while(h!==j&&(h=h.parentNode))if(n(m(r[e]),h)){q=!0;break parents}}q&&i.push(l)}return i}function r(a,b,c){switch(a){case"=":return b==c;case"^=":return b.match(new RegExp("^"+q(c)));case"$=":return b.match(new RegExp(q(c)+"$"));case"*=":return b.match(new RegExp(q(c)))}return!1}function q(a){return a.replace(/([\.\*\+\?\^\$\{\}\(\)\|\[\]\/\\])/g,"\\$1")}function p(a){var b=[],c=[],d=!1;e(a.split(/\s+/)).each(function(a){d?(c.push(a),/\]/.test(a)&&(d=!1,b=b.concat(c.join(" ")))):/\[[^\]]*$/.test(a)?(d=!0,c=[],c.push(a)):b.push(a)});return b}function o(a){var b,c,d=[],e=m(a),f=e[1]||"*",g=document.getElementsByTagName(f);for(b=0;b<g.length;b++)el=g[b],(c=n(e,el))&&d.push(c);return d}function n(a,b){var c=a[0],d=a[1],e=a[2],h=a[3],i=a[4],j=a[5],k=a[6],l,m,n,o,p;if(d&&b.tagName.toLowerCase()!==d)return!1;if(e&&(o=e.match(f))&&o[1]!==b.id)return!1;if(e&&(p=e.match(g)))for(n=0;n<p.length;n++)if(!(new RegExp("(^|\\s+)"+p[n].slice(1)+"(\\s+|$)")).test(b.className))return!1;if(h&&!k){var q=b.attributes,s;for(s in q)if(q.hasOwnProperty(s)&&q[s].name==i)return b}if(h&&!r(j,b.getAttribute(i)||"",k))return!1;return b}function m(a){return a.match(new RegExp(k.source+"("+l.source+")?"))}function e(a){return new d(a)}function d(a){this.obj=c(a)}function c(a){var b,c,d=[];for(b=0,c=a.length;b<c;b++)d[b]=a[b];return d}d.prototype={each:function(a){for(var b=0;b<this.obj.length;b++)a.call(this.obj[b],this.obj[b],b,this.obj);return this},map:function(a){var b=[],c;for(c=0;c<this.obj.length;c++)b[c]=a.call(this.obj[c],this.obj[c],c,this.obj);return b}};var f=/#([\w\-]+)/,g=/\.[\w\-]+/g,h=/^#([\w\-]+$)/,i=/^([\w\-]+)$/,j=document.getElementsByTagName("html")[0],k=/^([a-z0-9]+)?(?:([\.\#]+[\w\-\.#]+)?)/,l=/\[([\w\-]+)(?:([\^\$\*]?\=)['"]?([ \w\-\/\?\&\=\:\.\(\)\!,@#%<>\{\}\$\*\^]+)["']?)?\]/,u=function(){function d(d,e){var e=typeof e=="string"?document.querySelector(e):e,f;if(f=d.match(h))return[document.getElementById(f[1])];if(b=d.match(a))return c((e||document).getElementsByClassName(b[1]),0);return c((e||document).querySelectorAll(d),0)}var a=/^\.([\w\-]+)$/,b;if(document.querySelector&&document.querySelectorAll)return d;return function(a,b){var b=typeof b=="string"?u(b)[0]:b||document,c;if(c=a.match(h))return[document.getElementById(c[1])];if(c=a.match(i))return[b.getElementsByTagName(c[1])];var d=[],f=e(a.split(",")).map(function(a){return s(a)});e(f).each(function(a){var c=a;b!==document&&(c=[],e(a).each(function(a){t(a,b)&&c.push(a)})),d=d.concat(c)});return d}}(),v=a.qwery;u.noConflict=function(){a.qwery=v;return this},a.qwery=u}(this,document)
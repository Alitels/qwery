/*!
  * qwery.js - copyright @dedfat
  * https://github.com/ded/qwery
  * Follow our software http://twitter.com/dedfat
  * MIT License
  */

!function(a,b){function R(a){var b=[],c=[],d,f=L.g(a)||L.s(a,a.split(C));f=f.slice(0);if(!f.length)return b;b=O(f);if(!f.length)return b;for(e=b.length;e--;){n=b[e],j=n;for(d=f.length;d--;)parents:while(j!==B&&(j=j.parentNode))if(p=N.apply(j,M(f[d])))break parents;p&&c.push(n)}return c}function Q(a,b,c){switch(a){case"=":return b==c;case"^=":return b.match(K.g("^="+c)||K.s("^="+c,new RegExp("^"+P(c))));case"$=":return b.match(K.g("$="+c)||K.s("$="+c,new RegExp("$"+P(c))));case"*=":return b.match(K.g(c)||K.s(c,new RegExp(P(c))))}return!1}function P(a){return J.g(a)||J.s(a,a.replace(/([\.\*\+\?\^\$\{\}\(\)\|\[\]\/\\])/g,"\\$1"))}function O(a){var c=[],d=a.pop(),e=M(d),f=e[1]||"*",g,i,j=a.length&&(h=a[0].match(x))?b.getElementById(h[1]):b,k=j.getElementsByTagName(f);for(g=0,i=k.length;g<i;g++)m=k[g],(r=N.apply(m,e))&&c.push(r);return c}function N(a,b,c,e,f,g,h){var j,k,l;if(b&&this.tagName.toLowerCase()!==b)return!1;if(c&&(j=c.match(v))&&j[1]!==this.id)return!1;if(c&&(q=c.match(w)))for(d=q.length;d--;){k=q[d].slice(1);if(!(I.g(k)||I.s(k,new RegExp("(^|\\s+)"+k+"(\\s+|$)"))).test(this.className))return!1}if(e&&!h){i=this.attributes;for(l in i)if(Object.prototype.hasOwnProperty.call(i,l)&&(i[l].name||l)==f)return this}if(e&&!Q(g,this.getAttribute(f)||"",h))return!1;return this}function M(a){return a.match(F)}function G(a){k=[];for(d=0,o=a.length;d<o;d++)k[d]=a[d];return k}var c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v=/#([\w\-]+)/,w=/\.[\w\-]+/g,x=/^#([\w\-]+$)/,y=/^\.([\w\-]+)$/,z=/^([\w\-]+)$/,A=/^([\w]+)?\.([\w\-])+$/,B=b.getElementsByTagName("html")[0],C=/\s(?![\s\w\-\/\?\&\=\:\.\(\)\!,@#%<>\{\}\$\*\^'"]*\])/,D=/^([a-z0-9]+)?(?:([\.\#]+[\w\-\.#]+)?)/,E=/\[([\w\-]+)(?:([\^\$\*]?\=)['"]?([ \w\-\/\?\&\=\:\.\(\)\!,@#%<>\{\}\$\*\^]+)["']?)?\]/,F=new RegExp(D.source+"("+E.source+")?"),H=function(){this.c={}};H.prototype={g:function(a){return this.c[a]||undefined},s:function(a,b){this.c[a]=b;return b}};var I=new H,J=new H,K=new H,L=new H,S="compareDocumentPosition"in B?function(a,b){return(b.compareDocumentPosition(a)&16)==16}:"contains"in B?function(a,b){return b!==a&&b.contains(a)}:function(a,b){while(a=a.parentNode)if(a===b)return!0;return!1},T=function(){function a(c,d){d=typeof d=="string"?a(d)[0]:d;if(h=c.match(x))return[b.getElementById(h[1])];if(b.getElementsByClassName&&(h=c.match(y)))return G((d||b).getElementsByClassName(h[1]),0);return G((d||b).querySelectorAll(c),0)}if(b.querySelector&&b.querySelectorAll)return a;return function(a,c){c=typeof c=="string"?T(c)[0]:c||b;var d,f=[],g=[],i;if(h=a.match(x))return[b.getElementById(h[1])];if(h=a.match(z))return c.getElementsByTagName(h[1]);if(h=a.match(A)){s=c.getElementsByTagName(h[1]||"*"),k=I.g(h[2])||I.s(h[2],new RegExp("(^|\\s+)"+h[2]+"(\\s+|$)"));for(d=s.length;d--;)k.test(s[d].className)&&f.push(s[d]);return f}for(s=a.split(","),d=s.length;r=s[--d];)g[d]=R(r);for(d=g.length;u=g[--d];){var j=u;if(c!==b){j=[];for(e=u.length;i=u[--e];)S(i,c)&&j.push(i)}f=f.concat(j)}return f}}(),U=a.qwery;T.noConflict=function(){a.qwery=U;return this},a.qwery=T}(this,document)
/*!
  * qwery.js - copyright @dedfat
  * https://github.com/ded/qwery
  * Follow our software http://twitter.com/dedfat
  * MIT License
  */

!function(a,b){function P(a){var b=[],c=[],d,f=a.split(/\s(?![\s\w\-\/\?\&\=\:\.\(\)\!,@#%<>\{\}\$\*\^'"]*\])/);if(!f.length)return b;b=M(f.pop());if(!f.length)return b;for(e=b.length;e--;){n=b[e],j=n;for(d=f.length;d--;)parents:while(j!==B&&(j=j.parentNode))if(p=L.apply(j,K(f[d])))break parents;p&&c.push(n)}return c}function O(a,b,c){switch(a){case"=":return b==c;case"^=":return b.match(J.g("^="+c)||J.s("^="+c,new RegExp("^"+N(c))));case"$=":return b.match(J.g("$="+c)||J.s("$="+c,new RegExp("$"+N(c))));case"*=":return b.match(J.g(c)||J.s(c,new RegExp(N(c))))}return!1}function N(a){return I.g(a)||I.s(a,a.replace(/([\.\*\+\?\^\$\{\}\(\)\|\[\]\/\\])/g,"\\$1"))}function M(a){var c=[],d=K(a),e=d[1]||"*",f=b.getElementsByTagName(e),g,h;for(g=0,h=f.length;g<h;g++)m=f[g],(r=L.apply(m,d))&&c.push(r);return c}function L(a,b,c,e,f,g,h){var j,k;if(b&&this.tagName.toLowerCase()!==b)return!1;if(c&&(j=c.match(v))&&j[1]!==this.id)return!1;if(c&&(q=c.match(w)))for(d=q.length;d--;){k=q[d].slice(1);if(!(H.g(k)||H.s(k,new RegExp("(^|\\s+)"+k+"(\\s+|$)"))).test(this.className))return!1}if(e&&!h){i=this.attributes;for(var l in i)if(i.hasOwnProperty(l)&&i[l].name==f)return this}if(e&&!O(g,this.getAttribute(f)||"",h))return!1;return this}function K(a){return a.match(E)}function F(a){k=[];for(d=0,o=a.length;d<o;d++)k[d]=a[d];return k}var c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v=/#([\w\-]+)/,w=/\.[\w\-]+/g,x=/^#([\w\-]+$)/,y=/^\.([\w\-]+)$/,z=/^([\w\-]+)$/,A=/^([\w]+)?\.([\w\-])+$/,B=b.getElementsByTagName("html")[0],C=/^([a-z0-9]+)?(?:([\.\#]+[\w\-\.#]+)?)/,D=/\[([\w\-]+)(?:([\^\$\*]?\=)['"]?([ \w\-\/\?\&\=\:\.\(\)\!,@#%<>\{\}\$\*\^]+)["']?)?\]/,E=new RegExp(C.source+"("+D.source+")?"),G=function(){this.c={}};G.prototype={g:function(a){return this.c[a]||undefined},s:function(a,b){this.c[a]=b;return b}};var H=new G,I=new G,J=new G,Q="compareDocumentPosition"in B?function(a,b){return(b.compareDocumentPosition(a)&16)==16}:"contains"in B?function(a,b){return b!==a&&b.contains(a)}:function(a,b){while(a=a.parentNode)if(a===b)return!0;return!1},R=function(){function a(c,d){d=typeof d=="string"?a(d)[0]:d;if(h=c.match(x))return[b.getElementById(h[1])];if(b.getElementsByClassName&&(h=c.match(y)))return F((d||b).getElementsByClassName(h[1]),0);return F((d||b).querySelectorAll(c),0)}if(b.querySelector&&b.querySelectorAll)return a;return function(a,c,d){c=typeof c=="string"?R(c)[0]:c||b;var f,g=[],i=[],j;if(h=a.match(x))return[b.getElementById(h[1])];if(h=a.match(z))return c.getElementsByTagName(h[1]);if(h=a.match(A)){s=c.getElementsByTagName(h[1]||"*");for(f=s.length;f--;)(H.g(h[2])||H.s(h[2],new RegExp("(^|\\s+)"+h[2]+"(\\s+|$)"))).test(s[f].className)&&g.push(s[f]);return g}for(s=a.split(","),f=s.length;r=s[--f];)i[f]=P(r);for(f=i.length;u=i[--f];){var k=u;if(c!==b){k=[];for(e=u.length;j=u[--e];)Q(j,c)&&k.push(j)}g=g.concat(k)}return g}}(),S=a.qwery;R.noConflict=function(){a.qwery=S;return this},a.qwery=R}(this,document)
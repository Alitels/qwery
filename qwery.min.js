/*!
  * qwery.js - copyright @dedfat
  * https://github.com/ded/qwery
  * Follow our software http://twitter.com/dedfat
  * MIT License
  */

!function(a,b){function t(a,b){if(!b||!a||b==a)return!1;if(b.contains&&a.nodeType)return b.contains(a);if(b.compareDocumentPosition&&a.nodeType)return!!(b.compareDocumentPosition(a)&16);return!1}function s(a){var b=[],c,d,e,f,g,h,i=[],k,l,q=!0,r=p(a);if(!r.length)return b;b=o(r.pop());if(!r.length)return b;for(f=b.length;f--;){l=b[f],h=l;for(e=r.length;e--;){q=!1;parents:while(h!==j&&(h=h.parentNode))if(n(m(r[e]),h)){q=!0;break parents}}q&&i.push(l)}return i}function r(a,b,c){switch(a){case"=":return b==c;case"^=":return b.match(new RegExp("^"+q(c)));case"$=":return b.match(new RegExp(q(c)+"$"));case"*=":return b.match(new RegExp(q(c)))}return!1}function q(a){return a.replace(/([\.\*\+\?\^\$\{\}\(\)\|\[\]\/\\])/g,"\\$1")}function p(a){var b=[],c=[],d=!1;e(a.split(/\s+/)).each(function(a){d?(c.push(a),/\]/.test(a)&&(d=!1,b=b.concat(c.join(" ")))):/\[[^\]]*$/.test(a)?(d=!0,c=[],c.push(a)):b.push(a)});return b}function o(a){var c,d,e=[],f=m(a),g=f[1]||"*",h=b.getElementsByTagName(g);for(c=0;c<h.length;c++)el=h[c],(d=n(f,el))&&e.push(d);return e}function n(a,b){var c=a[0],d=a[1],e=a[2],h=a[3],i=a[4],j=a[5],k=a[6],l,m,n,o,p;if(d&&b.tagName.toLowerCase()!==d)return!1;if(e&&(o=e.match(f))&&o[1]!==b.id)return!1;if(e&&(p=e.match(g)))for(n=0;n<p.length;n++)if(!(new RegExp("(^|\\s+)"+p[n].slice(1)+"(\\s+|$)")).test(b.className))return!1;if(h&&!k){var q=b.attributes,s;for(s in q)if(q.hasOwnProperty(s)&&q[s].name==i)return b}if(h&&!r(j,b.getAttribute(i)||"",k))return!1;return b}function m(a){return a.match(new RegExp(k.source+"("+l.source+")?"))}function e(a){return new d(a)}function d(a){this.obj=c(a)}function c(a){var b,c,d=[];for(b=0,c=a.length;b<c;b++)d[b]=a[b];return d}d.prototype={each:function(a){for(var b=0;b<this.obj.length;b++)a.call(this.obj[b],this.obj[b],b,this.obj);return this},map:function(a){var b=[],c;for(c=0;c<this.obj.length;c++)b[c]=a.call(this.obj[c],this.obj[c],c,this.obj);return b}};var f=/#([\w\-]+)/,g=/\.[\w\-]+/g,h=/^#([\w\-]+$)/,i=/^([\w\-]+)$/,j=b.getElementsByTagName("html")[0],k=/^([a-z0-9]+)?(?:([\.\#]+[\w\-\.#]+)?)/,l=/\[([\w\-]+)(?:([\^\$\*]?\=)['"]?([ \w\-\/\?\&\=\:\.\(\)\!,@#%<>\{\}\$\*\^]+)["']?)?\]/,u=function(){function f(e,f){f=typeof f=="string"?b.querySelector(f):f;var g;if(g=e.match(h))return[b.getElementById(g[1])];if(b.getElementsByClassName&&(d=e.match(a)))return c((f||b).getElementsByClassName(d[1]),0);return c((f||b).querySelectorAll(e),0)}var a=/^\.([\w\-]+)$/,d;if(b.querySelector&&b.querySelectorAll)return f;return function(a,c){c=typeof c=="string"?u(c)[0]:c||b;var d;if(d=a.match(h))return[b.getElementById(d[1])];if(d=a.match(i))return[c.getElementsByTagName(d[1])];var f=[],g=e(a.split(",")).map(function(a){return s(a)});e(g).each(function(a){var d=a;c!==b&&(d=[],e(a).each(function(a){t(a,c)&&d.push(a)})),f=f.concat(d)});return f}}(),v=a.qwery;u.noConflict=function(){a.qwery=v;return this},a.qwery=u}(this,document)
/*!
  * qwery.js - copyright @dedfat
  * https://github.com/ded/qwery
  * Follow our software http://twitter.com/dedfat
  * MIT License
  */

!function(a,b){function j(a){var c=a.split(" "),e,f,g,i,j,k,l,m,n,o,p,q,r,s=[b],t,u,v,w;for(j=0,m=c.length;j<m;j++){e=c[j].replace(/^\s+|\s+$/g,"");if(e.indexOf("#")>-1){f=e.split("#"),g=f[0];var x=b.getElementById(f[1]);if(g&&x.nodeName.toLowerCase()!=g)return[];s=[x];continue}if(e.indexOf(".")>-1){f=e.split("."),g=f[p=0],g=g||"*",o=[];for(i=0,n=s.length;i<n;i++){q=g=="*"?d(s[i]):s[i].getElementsByTagName(g);for(k=0,l=q.length;k<l;k++)o[p++]=q[k]}s=[],r=0;for(l=0,n=o.length;l<n;l++)o[l].className&&o[l].className.match(new RegExp("(?:^|\\s+)"+f[1]+"(?:\\s+|$)"))&&(s[r++]=o[l]);continue}var y=e.match(/^(\w*)\[(\w+)([=~\|\^\$\*]?)=?"?([^\]"]*)"?\]$/);if(y){g=y[1],t=y[2],u=y[3],v=y[4],g||(g="*"),o=[],p=0;for(i=0;i<s.length;i++){g=="*"?q=d(s[i]):q=s[i].getElementsByTagName(g);for(k=0;k<q.length;k++)o[p++]=q[k]}s=[],r=0,w=h[u]||h[""];for(l=0;l<o.length;l++)w(o[l],t,v)&&(s[r++]=o[l]);continue}g=e,o=[],p=0;for(i=0;i<s.length;i++){q=s[i].getElementsByTagName(g);for(k=0;k<q.length;k++)o[p++]=q[k]}s=o}return s}function i(a,b){if(!b||!a||b==a)return!1;if(b.contains&&a.nodeType)return b.contains(a);if(b.compareDocumentPosition&&a.nodeType)return!!(b.compareDocumentPosition(a)&16);return!1}function g(a,b){return a.getAttribute(b)||""}function f(a){return new e(a)}function e(a){this.obj=c(a)}function d(a){return a.all?a.all:a.getElementsByTagName("*")}function c(a){var b,c,d=[];for(b=0,c=a.length;b<c;b++)d[b]=a[b];return d}e.prototype={each:function(a){for(var b=0;b<this.obj.length;b++)a.call(this.obj[b],this.obj[b],b,this.obj);return this},map:function(a){var b=[];for(var c=0;c<this.obj.length;c++)b[c]=a.call(this.obj[c],this.obj[c],c,this.obj);return b}};var h={"=":function(a,b,c){return a.getAttribute(b)==c},"~":function(a,b,c){return g(a,b).match(new RegExp("\\b"+c+"\\b"))},"|":function(a,b,c){return g(a,b).match(new RegExp("^"+c+"-?"))},"^":function(a,b,c){return g(a,b).indexOf(c)===0},$:function(a,b,c){return g(a,b).lastIndexOf(c)==a.getAttribute(b).length-c.length},"*":function(a,b,c){return g(a,b).indexOf(c)>-1},"":function(a,b){return a.getAttribute(b)}},k=function(){function d(d,e){e=typeof e=="string"?document.querySelector(e):e;if(b=d.match(a))return c((e||document).getElementsByClassName(b[1]),0);return c((e||document).querySelectorAll(d),0)}var a=/^\.([\w\-]+)$/,b;if(document.querySelector&&document.querySelectorAll)return d;return function(a,b){b=typeof b=="string"?k(b)[0]:b||document;var c=[],d=f(a.split(",")).map(function(a){return j(a)});f(d).each(function(a){var d=a;b!==document&&(d=[],f(a).each(function(a){i(a,b)&&d.push(a)})),c=c.concat(d)});return c}}(),l=a.qwery;k.noConflict=function(){a.qwery=l;return this},a.qwery=k}(this,document)
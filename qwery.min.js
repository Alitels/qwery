/*!
  * qwery.js - copyright @dedfat
  * original inspiration: http://simonwillison.net/2003/Mar/25/getElementsBySelector/
  * https://github.com/polvero/qwery
  * Follow our software http://twitter.com/dedfat
  * MIT License
  */

!function(a,b){function j(a,d){if(!b.getElementsByTagName)return[];d=d||document;if(b.querySelectorAll)return c(d.querySelectorAll(a),0);var e=[],g=f(a.split(",")).map(function(a){return i(a,d)});f(g).each(function(a){var b=a;d!==document&&(b=[],f(a).each(function(a){h(a,d)&&b.push(a)})),e=e.concat(b)});return e}function i(a,c){var e=a.split(" "),f,h,i,j,k,l,m,n,o,p,q,r,s=[b];for(j=0,m=e.length;j<m;j++){token=e[j].replace(/^\s+|\s+$/g,"");if(token.indexOf("#")>-1){f=token.split("#"),h=f[0];var t=b.getElementById(f[1]);if(h&&t.nodeName.toLowerCase()!=h)return[];s=[t];continue}if(token.indexOf(".")>-1){f=token.split("."),h=f[p=0],h=h||"*",o=[];for(i=0,n=s.length;i<n;i++){q=h=="*"?d(s[i]):s[i].getElementsByTagName(h);for(k=0,l=q.length;k<l;k++)o[p++]=q[k]}s=[],r=0;for(l=0,n=o.length;l<n;l++)o[l].className&&o[l].className.match(new RegExp("(?:^|\\s+)"+f[1]+"(?:\\s+|$)"))&&(s[r++]=o[l]);continue}if(token.match(/^(\w*)\[(\w+)([=~\|\^\$\*]?)=?"?([^\]"]*)"?\]$/)){h=RegExp.$1;var u=RegExp.$2,v=RegExp.$3,w=RegExp.$4;h||(h="*"),o=[],p=0;for(i=0;i<s.length;i++){h=="*"?q=d(s[i]):q=s[i].getElementsByTagName(h);for(k=0;k<q.length;k++)o[p++]=q[k]}s=[],r=0;var x=g[v]||g[""];for(l=0;l<o.length;l++)x(o[l],u,w)&&(s[r++]=o[l]);continue}h=token,o=[],p=0;for(i=0;i<s.length;i++){q=s[i].getElementsByTagName(h);for(k=0;k<q.length;k++)o[p++]=q[k]}s=o}return s}function h(a,b){if(!b||!a)return!1;if(b.contains&&a.nodeType)return b.contains(a);if(b.compareDocumentPosition&&a.nodeType)return!!(b.compareDocumentPosition(a)&16);if(a.nodeType)return!1;return!1}function f(a){return new e(a)}function e(a){this.obj=c(a)}function d(a){return a.all?a.all:a.getElementsByTagName("*")}function c(a){return Array.prototype.slice.call(a,0)}e.prototype={each:function(a){for(var b=0;b<this.obj.length;b++)a.call(this.obj[b],this.obj[b],b,this.obj);return this},map:function(a){var b=[];for(var c=0;c<this.obj.length;c++)b[c]=a.call(this.obj[c],this.obj[c],c,this.obj);return b}};var g={"=":function(a,b,c){return a.getAttribute(b)==c},"~":function(a,b,c){return a.getAttribute(b).match(new RegExp("\\b"+c+"\\b"))},"|":function(a,b,c){return a.getAttribute(b).match(new RegExp("^"+c+"-?"))},"^":function(a,b,c){return a.getAttribute(b).indexOf(c)===0},$:function(a,b,c){return a.getAttribute(b).lastIndexOf(c)==a.getAttribute(b).length-c.length},"*":function(a,b,c){return a.getAttribute(b).indexOf(c)>-1},"":function(a,b){return a.getAttribute(b)}},k=a.qwery;j.noConflict=function(){a.qwery=k;return this},a.qwery=j}(this,document)
/*!
  * qwery.js - copyright @dedfat
  * https://github.com/ded/qwery
  * Follow our software http://twitter.com/dedfat
  * MIT License
  */

!function(a,b){function t(a,b){if(!b||!a||b==a)return!1;if(b.contains&&a.nodeType)return b.contains(a);if(b.compareDocumentPosition&&a.nodeType)return!!(b.compareDocumentPosition(a)&16);return!1}function s(a){var b=[],c,d,e,f,h,i,j=[],k,l,q=!0,r=p(a);if(!r.length)return b;b=o(r.pop());if(!r.length)return b;for(f=b.length;f--;){l=b[f],i=l;for(e=r.length;e--;){q=!1;parents:while(i!==g&&(i=i.parentNode))if(n.apply(i,m(r[e]))){q=!0;break parents}}q&&j.push(l)}return j}function r(a,b,c){switch(a){case"=":return b==c;case"^=":return b.match(new RegExp("^"+q(c)));case"$=":return b.match(new RegExp(q(c)+"$"));case"*=":return b.match(new RegExp(q(c)))}return!1}function q(a){return a.replace(/([\.\*\+\?\^\$\{\}\(\)\|\[\]\/\\])/g,"\\$1")}function p(a){var b=[],c=[],d=!1;l(a.split(/\s+/)).each(function(a){d?(c.push(a),/\]/.test(a)&&(d=!1,b=b.concat(c.join(" ")))):/\[[^\]]*$/.test(a)?(d=!0,c=[],c.push(a)):b.push(a)});return b}function o(a){var c,d,e=[],f=m(a),g=f[1]||"*",h=b.getElementsByTagName(g);for(c=0;c<h.length;c++)el=h[c],(d=n.apply(el,f))&&e.push(d);return e}function n(a,b,e,f,g,h,i){var j,k,l,m,n;if(b&&this.tagName.toLowerCase()!==b)return!1;if(e&&(m=e.match(c))&&m[1]!==this.id)return!1;if(e&&(n=e.match(d)))for(l=0;l<n.length;l++)if(!(new RegExp("(^|\\s+)"+n[l].slice(1)+"(\\s+|$)")).test(this.className))return!1;if(f&&!i){var o=this.attributes,p;for(p in o)if(o.hasOwnProperty(p)&&o[p].name==g)return this}if(f&&!r(h,this.getAttribute(g)||"",i))return!1;return this}function m(a){return a.match(new RegExp(h.source+"("+i.source+")?"))}function l(a){return new k(a)}function k(a){this.obj=j(a)}function j(a){var b,c,d=[];for(b=0,c=a.length;b<c;b++)d[b]=a[b];return d}var c=/#([\w\-]+)/,d=/\.[\w\-]+/g,e=/^#([\w\-]+$)/,f=/^([\w\-]+)$/,g=b.getElementsByTagName("html")[0],h=/^([a-z0-9]+)?(?:([\.\#]+[\w\-\.#]+)?)/,i=/\[([\w\-]+)(?:([\^\$\*]?\=)['"]?([ \w\-\/\?\&\=\:\.\(\)\!,@#%<>\{\}\$\*\^]+)["']?)?\]/;k.prototype={each:function(a){for(var b=0,c=this.obj.length;b<c;b++)a.call(this.obj[b],this.obj[b],b,this.obj);return this},map:function(a){var b=[],c,d;for(c=0,d=this.obj.length;c<d;c++)b[c]=a.call(this.obj[c],this.obj[c],c,this.obj);return b}};var u=function(){function d(d,f){f=typeof f=="string"?b.querySelector(f):f;var g;if(g=d.match(e))return[b.getElementById(g[1])];if(b.getElementsByClassName&&(c=d.match(a)))return j((f||b).getElementsByClassName(c[1]),0);return j((f||b).querySelectorAll(d),0)}var a=/^\.([\w\-]+)$/,c;if(b.querySelector&&b.querySelectorAll)return d;return function(a,c){c=typeof c=="string"?u(c)[0]:c||b;var d;if(d=a.match(e))return[b.getElementById(d[1])];if(d=a.match(f))return[c.getElementsByTagName(d[1])];var g=[],h=l(a.split(",")).map(function(a){return s(a)});l(h).each(function(a){var d=a;c!==b&&(d=[],l(a).each(function(a){t(a,c)&&d.push(a)})),g=g.concat(d)});return g}}(),v=a.qwery;u.noConflict=function(){a.qwery=v;return this},a.qwery=u}(this,document)